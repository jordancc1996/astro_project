---
const destinations = [
  {
    id: 'buenos-aires',
    name: 'Buenos Aires',
    tagline: 'The Paris of the South',
    description: 'A cosmopolitan capital blending European elegance with Latin passion.',
    image: 'https://images.unsplash.com/photo-1589909202802-8f4aadce1849?w=800&q=80',
    alt: 'Buenos Aires skyline, expat real estate and residency destination',
    href: '/real-estate/buenos-aires',
  },
  {
    id: 'mendoza',
    name: 'Mendoza',
    tagline: 'Wine Country',
    description: 'Gateway to world-renowned vineyards and the majestic Andes.',
    image: 'https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&q=80',
    alt: 'Mendoza wine region and Andes mountains, Argentina expat location',
    href: '/real-estate/mendoza',
  },
  {
    id: 'bariloche',
    name: 'Bariloche',
    tagline: 'Patagonian Alps',
    description: 'Stunning landscapes with pristine lakes and snow-capped peaks.',
    image: 'https://images.unsplash.com/photo-1519681393784-d120267933ba?w=800&q=80',
    alt: 'Bariloche Patagonian lakes and mountains, Argentina property investment',
    href: '/real-estate/bariloche',
  },
  {
    id: 'cordoba',
    name: 'Córdoba',
    tagline: 'The Heartland',
    description: 'Colonial history meets modern innovation in Argentina\'s second city.',
    image: 'https://images.unsplash.com/photo-1558642452-9d2a7deb7f62?w=800&q=80',
    alt: 'Córdoba city and heartland, Argentina second city expat living',
    href: '/real-estate/cordoba',
  },
  {
    id: 'salta',
    name: 'Salta',
    tagline: 'The Beautiful',
    description: 'Colonial architecture meets dramatic Andean landscapes.',
    image: 'https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=800&q=80',
    alt: 'Salta colonial architecture and Andean landscapes, Argentina north',
    href: '/real-estate/salta',
  },
];
---

<section class="section-padding bg-cream-light">
  <div class="container-luxury">
    <!-- Section Header -->
    <div class="flex flex-col md:flex-row md:items-end md:justify-between mb-14 md:mb-20 reveal">
      <div class="max-w-xl">
        <p class="label-small mb-5">
          Explore Argentina
        </p>
        <h2 class="font-serif text-4xl md:text-5xl font-light text-charcoal tracking-wide mb-4">
          Top Locations for Expats
        </h2>
        <p class="font-sans text-base font-light text-gray-warm leading-relaxed">
          Where you establish Argentina residency matters. From Buenos Aires to wine country and Patagonia, these are the regions our clients choose most when they invest in Argentina and build their life here.
        </p>
      </div>

      <!-- Navigation Arrows -->
      <div class="flex items-center gap-4 mt-8 md:mt-0">
        <button id="carousel-prev" class="w-12 h-12 border border-gray-border flex items-center justify-center text-gray-light hover:text-charcoal hover:border-charcoal transition-all duration-300">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
          </svg>
        </button>
        <button id="carousel-next" class="w-12 h-12 border border-gray-border flex items-center justify-center text-gray-light hover:text-charcoal hover:border-charcoal transition-all duration-300">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Centered Grid Carousel -->
  <div class="carousel-wrapper">
    <div class="carousel-container" id="destinations-carousel">
      {destinations.map((destination) => (
        <div class="carousel-card group">
          <a href={destination.href} class="block">
            <div class="destination-card">
              <!-- Image - z-index: 0 (below-fold, lazy) -->
              <img
                src={destination.image}
                alt={destination.alt}
                width="800"
                height="520"
                loading="lazy"
                class="destination-image"
              />

              <!-- Dark Gradient Overlay - z-index: 1 -->
              <div class="destination-overlay"></div>

              <!-- Content - z-index: 2 -->
              <div class="destination-content">
                <!-- Tagline Label -->
                <p class="destination-tagline">
                  {destination.tagline}
                </p>

                <!-- Location Name -->
                <h3 class="destination-name">
                  {destination.name}
                </h3>

                <!-- Description - visible on hover -->
                <p class="destination-description">
                  {destination.description}
                </p>

                <!-- CTA Link -->
                <span class="destination-link">
                  <span>View Properties</span>
                  <svg class="w-4 h-4 transition-transform duration-300 group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                  </svg>
                </span>
              </div>
            </div>
          </a>
        </div>
      ))}
    </div>
  </div>

  <div class="container-luxury">
    <!-- View All -->
    <div class="text-center mt-14 md:mt-20 reveal">
      <a href="/real-estate" class="link-underline font-sans text-sm font-light tracking-widest uppercase text-charcoal-light">
        View All Locations
      </a>
    </div>
  </div>
</section>

<style>
  /* Carousel Wrapper - Centers the carousel */
  .carousel-wrapper {
    width: 100%;
    display: flex;
    justify-content: center;
    padding: 0 24px;
  }

  @media (min-width: 768px) {
    .carousel-wrapper {
      padding: 0 48px;
    }
  }

  @media (min-width: 1200px) {
    .carousel-wrapper {
      padding: 0 80px;
    }
  }

  /* Carousel Container - Horizontal scroll with centered content */
  .carousel-container {
    display: flex;
    gap: 24px;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    -ms-overflow-style: none;
    padding: 8px 0;
    max-width: 1600px;
    width: 100%;
    justify-content: flex-start;
  }

  .carousel-container::-webkit-scrollbar {
    display: none;
  }

  /* Individual Card */
  .carousel-card {
    flex: 0 0 auto;
    width: 280px;
    scroll-snap-align: start;
  }

  @media (min-width: 640px) {
    .carousel-card {
      width: 320px;
    }
    .carousel-container {
      gap: 28px;
    }
  }

  @media (min-width: 768px) {
    .carousel-card {
      width: 340px;
    }
    .carousel-container {
      gap: 32px;
    }
  }

  @media (min-width: 1024px) {
    .carousel-card {
      width: 300px;
    }
    .carousel-container {
      justify-content: center;
      gap: 24px;
    }
  }

  @media (min-width: 1400px) {
    .carousel-card {
      width: 320px;
    }
    .carousel-container {
      gap: 32px;
    }
  }

  /* Card Container */
  .destination-card {
    position: relative;
    height: 420px;
    overflow: hidden;
    border-radius: 4px;
  }

  @media (min-width: 768px) {
    .destination-card {
      height: 480px;
    }
  }

  @media (min-width: 1024px) {
    .destination-card {
      height: 520px;
    }
  }

  /* Background Image - z-index: 0 */
  .destination-image {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 0;
    filter: saturate(0.9);
    transition: transform 0.7s ease-out;
  }

  .group:hover .destination-image {
    transform: scale(1.05);
  }

  /* Dark Gradient Overlay - z-index: 1 */
  .destination-overlay {
    position: absolute;
    inset: 0;
    z-index: 1;
    background: linear-gradient(
      180deg,
      rgba(0, 0, 0, 0.1) 0%,
      rgba(0, 0, 0, 0.25) 40%,
      rgba(0, 0, 0, 0.7) 100%
    );
    transition: background 0.5s ease;
  }

  .group:hover .destination-overlay {
    background: linear-gradient(
      180deg,
      rgba(0, 0, 0, 0.15) 0%,
      rgba(0, 0, 0, 0.35) 40%,
      rgba(0, 0, 0, 0.8) 100%
    );
  }

  /* Content Container - z-index: 2 */
  .destination-content {
    position: absolute;
    inset: 0;
    z-index: 2;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    padding: 28px;
  }

  @media (min-width: 768px) {
    .destination-content {
      padding: 32px;
    }
  }

  /* Tagline Label */
  .destination-tagline {
    font-family: 'Montserrat', system-ui, sans-serif;
    font-size: 10px;
    font-weight: 400;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: #FFFFFF;
    opacity: 0.9;
    margin-bottom: 10px;
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
  }

  /* Location Name */
  .destination-name {
    font-family: 'Cormorant Garamond', Georgia, serif;
    font-size: 28px;
    font-weight: 300;
    letter-spacing: 0.02em;
    line-height: 1.15;
    color: #FFFFFF;
    margin-bottom: 12px;
    text-shadow: 0 2px 12px rgba(0, 0, 0, 0.6);
  }

  @media (min-width: 768px) {
    .destination-name {
      font-size: 32px;
    }
  }

  /* Description Text */
  .destination-description {
    font-family: 'Montserrat', system-ui, sans-serif;
    font-size: 13px;
    font-weight: 300;
    line-height: 1.6;
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: 20px;
    max-width: 280px;
    text-shadow: 0 1px 6px rgba(0, 0, 0, 0.5);
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.5s ease, transform 0.5s ease;
  }

  .group:hover .destination-description {
    opacity: 1;
    transform: translateY(0);
  }

  /* View Properties Link */
  .destination-link {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-family: 'Montserrat', system-ui, sans-serif;
    font-size: 11px;
    font-weight: 400;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: #FFFFFF;
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
    transition: opacity 0.3s ease, gap 0.3s ease;
  }

  .group:hover .destination-link {
    opacity: 1;
    gap: 12px;
  }
</style>

<script>
  const carousel = document.getElementById('destinations-carousel');
  const prevBtn = document.getElementById('carousel-prev');
  const nextBtn = document.getElementById('carousel-next');
  
  // Get actual card width + gap dynamically
  function getScrollAmount() {
    const card = carousel?.querySelector('.carousel-card');
    if (card) {
      const style = window.getComputedStyle(carousel);
      const gap = parseInt(style.gap) || 24;
      return card.offsetWidth + gap;
    }
    return 350;
  }

  prevBtn?.addEventListener('click', () => {
    carousel?.scrollBy({ left: -getScrollAmount(), behavior: 'smooth' });
  });

  nextBtn?.addEventListener('click', () => {
    carousel?.scrollBy({ left: getScrollAmount(), behavior: 'smooth' });
  });
</script>
